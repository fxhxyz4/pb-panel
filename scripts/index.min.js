console.clear();import{refs}from"./modules/refs.js";const{cardList:cardList,addBtn:addBtn,allBtn:allBtn,timeList:timeList}=refs;let timeText="5:00",timeout=5,count=0;timeList.forEach((t=>{t.addEventListener("click",(()=>{const e=t.textContent;e.includes("3")?(timeText="3:00",timeout=3):e.includes("4")?(timeText="4:00",timeout=4):(timeText="5:00",timeout=5)}))}));const addCard=()=>{count++;const t=document.createElement("li");t.className="cards-item";const e=document.createElement("div");e.className="card",e.style.width="15rem",e.style.height="16rem";const a=document.createElement("div");a.className="card-body";const n=document.createElement("h5");n.className="card-title",n.textContent=`team ${count}`;const d=document.createElement("p");d.className="card-time",d.style.display="none";const s=document.createElement("a");s.href="#",s.className=`btn btn-start btn-primary btn--padding cls${count}`,s.textContent="start",s.addEventListener("click",(()=>{d.style.display="block",t.classList.add("cards-started"),d.textContent=timeText,s.disabled=!0,startTimer(d,count)})),a.appendChild(n),a.appendChild(d),a.appendChild(s),e.appendChild(a),t.appendChild(e),cardList.appendChild(t)},startTimer=t=>{let e=60*timeout;const a=setInterval((()=>{e--,t.textContent=formatTime(e),e<=0&&(t.style.display="none",clearInterval(a)),t.textContent=formatTime(e)}),1e3)};addBtn.addEventListener("click",addCard);const formatTime=t=>`${Math.floor(t/60)}:${(t%60).toString().padStart(2,"0")}`;allBtn.addEventListener("click",(()=>{const t=document.querySelectorAll(".cards-item"),e=document.querySelectorAll(".card-time");if(t&&0===t.length)return void console.error("[error] please add teams");addBtn.disabled=!0,allBtn.disabled=!0,t.forEach((t=>{t.classList.add("cards-started")})),e.forEach(((t,e)=>{t.style.display="block",t.textContent=timeText}));const a=setInterval((()=>{e.forEach(((e,a)=>{let n=60*parseInt(e.textContent.split(":")[0])+parseInt(e.textContent.split(":")[1]);n--,n<=0&&(e.style.display="none",t[a].classList.remove("cards-started")),e.textContent=formatTime(n)})),0===document.querySelectorAll(".cards-started").length&&(addBtn.disabled=!1,allBtn.disabled=!1,clearInterval(a))}),1e3)}));